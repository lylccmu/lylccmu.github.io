
<html>
<head>
    <title>replacer</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <script type="text/javascript">
        function strReplace(str){
            document.form.output.value = str.replace(/\r\n/g,"\\n").replace(/\n/g,"");
        }
        function cls(){
            document.form.input.value = "";
            document.form.output.value = "";
        }
        function copyText() {
            const output = document.getElementById("output");
            output.select();
            output.setSelectionRange(0, 99999); // 兼容移动设备

            // 使用 clipboard API
            navigator.clipboard.writeText(output.value).then(function() {
                alert("已复制到剪贴板！");
            }, function(err) {
                alert("复制失败: " + err);
            });
        }
    </script>
</head>
<body>
<form id="form" name="form" method="post" action="#">
    <label>文本输入:</label><br>
    <p>
        <textarea name="input" cols="50" rows="10" id="input"></textarea><br>
    </p>
    <label>文本输出:</label><br>
    <p>
        <textarea name="output" cols="50" rows="10" id="output" readonly="readonly"></textarea><br>
    </p>
    <p>
        <label>
            <input type="button" value="强制阻止文本换行" onclick="strReplace(input.value)">
            <input type="button" value="清空" onclick="cls()">
            <input type="button" value="复制输出文本" onclick="copyText()">
        </label>
    </p>
</form>
</body>
</html>
